<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<TITLE>TOMOYO Linux : ccs-savepolicy man page</TITLE>
</head>

<BODY bgcolor=#F0F0F0 text=#000000 link=#0000ff vlink=#C000C0 alink=#ff0000><A NAME=top></A>
<!-- .\" -->
<!-- .\" Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010, 2011 NTT DATA Corporation. -->
<!-- .\" -->
<!-- .\" You may distribute under the terms of the GNU General Public -->
<!-- .\" License as specified in the file COPYING.ccs that comes with the -->
<!-- .\" ccs-tools source tarball. -->
<!-- .\" -->
<!-- .TH "CCS-SAVEPOLICY" "8" "April 2011" "ccs-savepolicy 1.8.1" "System Administration Utilities" -->
<CENTER>
<H1><HR><I>Manual Reference Pages &nbsp;-&nbsp;</I><NOBR>CCS-SAVEPOLICY (8)</NOBR><HR></H1>
</CENTER>
<!-- .SH "NAME" -->
<A name=>

     <H3>NAME</H3>

</A>
<BLOCKQUOTE>
ccs-savepolicy - save TOMOYO Linux policy
<!-- .SH "SYNOPSIS" -->
</BLOCKQUOTE>
<A name=1>

     <H3>SYNOPSIS</H3>

</A>
<BLOCKQUOTE>
<!-- .B ccs-savepolicy <directory> -->
<B>ccs-savepolicy &lt;directory&gt;</B> <!-- .sp -->
<P>
<!-- .B ccs-savepolicy <directory> <remote_ip:remote_port> -->
<B>ccs-savepolicy &lt;directory&gt; &lt;remote_ip:remote_port&gt;</B> <!-- .sp -->
<P>
<!-- .B ccs-savepolicy {-e|-d|-p|-m|-s} -->
<B>ccs-savepolicy {-e|-d|-p|-m|-s}</B> <!-- .sp -->
<P>
<!-- .B ccs-savepolicy {-e|-d|-p|-m|-s} <remote_ip:remote_port> -->
<B>ccs-savepolicy {-e|-d|-p|-m|-s} &lt;remote_ip:remote_port&gt;</B> <!-- .SH "DESCRIPTION" -->
</BLOCKQUOTE>
<A name=>

     <H3>DESCRIPTION</H3>

</A>
<BLOCKQUOTE>
This program saves TOMOYO Linux policy that is in kernel memory onto the disk.  By running this command, a directory in <I>/etc/ccs/policy/YY-MM-DD.hh:mm:ss/</I> format is created and four files named <I>domain_policy.conf</I>, <I>exception_policy.conf</I>, <I>profile.conf</I> and <I>manager.conf</I> are saved into the created directory, and a symbolic link <I>/etc/ccs/policy/previous</I> is updated to point to previous <I>YY-MM-DD.hh:mm:ss/</I> directory and a symbolic link /etc/ccs/policy/current is updated to point to current <I>YY-MM-DD.hh:mm:ss/</I> directory.
<!-- .PP -->
<P>
There should be symbolic links <I>/etc/ccs/domain_policy.conf</I>, <I>/etc/ccs/exception_policy.conf</I>, <I>/etc/ccs/profile.conf</I> and <I>/etc/ccs/manager.conf</I> which respectively point to <I>policy/current/domain_policy.conf</I>, <I>policy/current/exception_policy.conf</I>, <I>policy/current/profile.conf</I>, <I>policy/current/manager.conf</I>. Also, there should be a symbolic link <I>/etc/ccs/policy/current</I> which point to <I>YY-MM-DD.hh:mm:ss/</I> directory.
<!-- .PP -->
<P>
As a result, you can access the current policy files using <I>/etc/ccs/domain_policy.conf</I>, <I>/etc/ccs/exception_policy.conf</I>, <I>/etc/ccs/profile.conf</I> and <I>/etc/ccs/manager.conf</I> (or <I>/etc/ccs/policy/current/domain_policy.conf</I>, <I>/etc/ccs/policy/current/exception_policy.conf</I>, <I>/etc/ccs/policy/current/profile.conf</I> and <I>/etc/ccs/policy/current/manager.conf</I> if you prefer). Also, you can access the previous policy files using <I>/etc/ccs/policy/previous/domain_policy.conf</I>, <I>/etc/ccs/policy/previous/exception_policy.conf</I>, <I>/etc/ccs/policy/previous/profile.conf</I> and <I>/etc/ccs/policy/previous/manager.conf</I>.
<!-- .PP -->
<P>
This program works like the <B>cat</B> program, if policy type is specified.
<!-- .SH "OPTIONS" -->
</BLOCKQUOTE>
<A name=>

     <H3>OPTIONS</H3>

</A>
<BLOCKQUOTE>
<B>-e</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Print <I>/proc/ccs/exception_policy</I> to standard output.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>-d</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Print <I>/proc/ccs/domain_policy</I> to standard output.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>-p</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Print <I>/proc/ccs/profile</I> to standard output.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>-m</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Print <I>/proc/ccs/manager</I> to standard output.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>-s</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Print <I>/proc/ccs/stat</I> to standard output.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>&lt;directory&gt;</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Save policy to <I>&lt;directory&gt;/policy/YY-MM-DD.hh:mm:ss/</I> directory instead of the default <I>/etc/ccs/policy/YY-MM-DD.hh:mm:ss/</I> directory.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .PP -->
<P>
<B>&lt;remote_ip:remote_port&gt;</B>
<!-- .RS 4 -->
<BLOCKQUOTE>
Instead of saving local policy, save policy via an agent waiting at port <I>&lt;remote_port&gt;</I> on IP address <I>&lt;remote_ip&gt;</I>.
<!-- .RE -->
</BLOCKQUOTE>
<!-- .SH "EXAMPLES" -->
</BLOCKQUOTE>
<A name=>

     <H3>EXAMPLES</H3>

</A>
<BLOCKQUOTE>
<!-- .B Save policy to disk: -->
<B>Save policy to disk:</B> <!-- .nf -->
<PRE>
ccs-savepolicy
<!-- .fi -->
</PRE>
<!-- .PP -->
<P>
<!-- .B Print /proc/ccs/exception_policy to standard output: -->
<B>Print /proc/ccs/exception_policy to standard output:</B> <!-- .nf -->
<PRE>
ccs-savepolicy -e
<!-- .fi -->
</PRE>
<!-- .PP -->
<P>
<!-- .B Retrieve policy from 192.168.1.1:10000 and save into the \&"/etc/ccs/192.168.1.1/policy/YY-MM-DD.hh:mm:ss/\&" directory: -->
<B>Retrieve policy from 192.168.1.1:10000 and save into the  /etc/ccs/192.168.1.1/policy/YY-MM-DD.hh:mm:ss/ directory:</B> <!-- .nf -->
<PRE>
ccs-savepolicy /etc/ccs/192.168.1.1/ 192.168.1.1:10000
<!-- .fi -->
</PRE>
<!-- .SH "BUGS" -->
</BLOCKQUOTE>
<A name=>

     <H3>BUGS</H3>

</A>
<BLOCKQUOTE>
If there are any bugs, send an email with as much detail as possible to <A HREF="mailto:tomoyo-users-en@lists.sourceforge.jp">tomoyo-users-en@lists.sourceforge.jp</A>
<!-- .SH "AUTHORS" -->
</BLOCKQUOTE>
<A name=>

     <H3>AUTHORS</H3>

</A>
<BLOCKQUOTE>
<!-- .sp -->
Main authors:
<BLOCKQUOTE>
Tetsuo Handa &lt;penguin-kernel AT I-love.SAKURA.ne.jp&gt;
</BLOCKQUOTE>
</BLOCKQUOTE>
<BLOCKQUOTE>
Other contributers:
<BLOCKQUOTE>
<P>Jamie Nguyen &lt;jamie AT tomoyolinux.co.uk&gt;</P>
<P>Man pages, documentation and website.</P>
</BLOCKQUOTE>
</BLOCKQUOTE>
<A name=>

     <H3>SEE ALSO</H3>

</A>
<BLOCKQUOTE>
<!-- .PP -->
<P>
<B>ccs-editpolicy-agent</B>(8), <B>ccs-loadpolicy</B>(8)
<!-- .sp -->
<P>
See <A HREF="http://tomoyo.sourceforge.jp/">http://tomoyo.sourceforge.jp/</A> for more information.
</BLOCKQUOTE>
<P><HR>
<TABLE width=100%><TR> <TD width=33%><I>ccs-savepolicy 1.8.1</I></TD> <TD width=33% align=center>CCS-SAVEPOLICY (8)</TD> <TD align=right width=33%><I>April 2011</I></TD> </TR></TABLE><FONT SIZE=-1>Generated by <A HREF="http://www.squarebox.co.uk/users/rolf/download/manServer.shtml">manServer 1.07+ma1</A> from ccs-savepolicy using man macros.</FONT>
</BODY></HTML>
