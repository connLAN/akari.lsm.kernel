<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<link rel="stylesheet" href="../media/tomoyolinux.css" media="all" type="text/css">
<title>AKARI : The Official Guide : Chapter 8</title>
</head>

<body>

<div id="titlebar">
<a href="../index.html.en"><img src="../media/akarititle.png" alt="akarititle.png" width="174" height="40" border="0" align="left" title="AKARI"></a>
</div>

<div id="navbar" class="tomoyo-documentation">
<ul id="navbarlist">
<li id="tomoyo-home"><a href="../index.html.en" title="AKARI Home Page">Home</a></li>
<li id="tomoyo-about"><a href="../about.html.en" title="About AKARI">About</a></li>
<li id="tomoyo-documentation"><a href="../documentation.html.en" title="Official Documentation">Documentation</a></li>
<li id="tomoyo-support"><a href="../support.html.en" title="Support information">Support</a></li>
<li id="tomoyo-links"><a href="../links.html.en" title="Links">Links</a></li>
</ul>
<ul id="switch-language">
<li id="tomoyo-switch-language"><a href="chapter-8.html.ja" title="Go to Japanese page">Japanese page</a></li>
</ul>
</div>

<div id="content">

<div id="documentation">

<div id="navheader">
<p><a href="chapter-7.html.en">&lt;Prev&gt;</a> <a href="index.html.en">&lt;Index&gt;</a> <a href="chapter-9.html.en">&lt;Next&gt;</a></p>
</div>

<h2>Chapter 8: Interface permissions</h2>

<h3><a name="8.1">8.1. Register applications</a></h3>

<p>In order for a application or domain to modify policy in the <a href="policy-specification/proc-interface.html.en">/proc/ccs/</a> interface, it must be listed in <a href="policy-specification/proc-interface.html.en#manager">/proc/ccs/manager</a>. To register an application, you can for example run the following command:</p>

<pre class="command">
# echo "/usr/sbin/ccs-editpolicy" | /usr/sbin/ccs-loadpolicy -m
</pre>

<h3><a name="8.2">8.2. Managing as non-root user</a></h3>

<p>By default, only processes with UID=0 and EUID=0 (a.k.a. root user) are allowed to modify policy. In order to allow $USER user to modify policy, run this command:</p>

<pre class="command">
# echo "manage_by_non_root" | /usr/sbin/ccs-loadpolicy -m
# chown -R $USER /proc/ccs/
</pre>

<p>This can be reversed by running this command:</p>

<pre class="command">
# echo "delete manage_by_non_root" | /usr/sbin/ccs-loadpolicy -m
# chown -R root /proc/ccs/
</pre>

<p>If you want to have a separate user that is able to modify policy, the file "<code>/etc/ccs/ccs-post-init</code>" can be used. If this file exists, it is executed by <code>/sbin/ccs-init</code> at boot. To allow 'tomoyo' user to modify policy, create "<code>/etc/ccs/ccs-post-init</code>" with the following contents:</p>

<pre>
#! /bin/sh
echo manage_by_non_root &gt; /proc/ccs/manager
chown -R tomoyo /proc/ccs/
</pre>

<p>Then, make this file executable and make policy directory readable/writable by 'tomoyo' user:</p>

<pre class="command">
# chmod 755 /etc/ccs/ccs-post-init
# chown -R tomoyo /etc/ccs/
</pre>

<p>The exception to all of the above is for domains in "Learning Mode". Any of these domains can append access permissions to <a href="policy-specification/proc-interface.html.en#self_domain">the domain the process belongs to</a> until <a href="chapter-9.html.en#9.2.3">max_learning_entry</a> has been reached.</p>

</div><!-- documentation -->

</div><!-- content -->

<div id="navfooter">
<hr>
<table>
<tr>
<td class="docs-previous">
<a href="chapter-7.html.en">Prev</a>
</td>
<td class="docs-index">
<a href="index.html.en">Index</a>
</td>
<td class="docs-next">
<a href="chapter-9.html.en">Next</a>
</td>
</tr>
<tr>
<td class="docs-previous-description">
<p>Chapter 7: How do I enforce policy?</p>
</td>
<td class="docs-home">
</td>
<td class="docs-next-description">
<p>Chapter 9: Advanced profile management</p>
</td>
</tr>
</table>
</div>

<div id="footer">
<p class="language">Go to <a href="chapter-8.html.ja">Japanese page</a>.</p>
<p class="timestamp">Last modified: $Date$</p>
<p class="trademark">Linux&reg; is a registered trademark of Linus Torvalds world-wide. TOMOYO&reg; is a registered trademark of <a href="http://www.nttdata.co.jp/en/">NTT DATA Corporation</a>.</p>
<p><a href="http://osdn.jp/"><img src="http://osdn.jp/sflogo.php?group_id=5310" width="96" height="31" alt="sflogo.php" title="SourceForge.jp"></a></p>
</div>

</body>
</html>
